(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var s=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===s?new Date(t.getTime()):"number"==typeof t||"[object Number]"===s?new Date(t):("string"!=typeof t&&"[object String]"!==s||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function s(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function o(o,n){e(1,arguments);var i=n||{},a=i.locale,r=a&&a.options&&a.options.weekStartsOn,c=null==r?0:s(r),d=null==i.weekStartsOn?c:s(i.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=t(o),u=l.getDay(),m=(u<d?7:0)+u-d;return l.setDate(l.getDate()-m),l.setHours(0,0,0,0),l}function n(t,s,n){e(2,arguments);var i=o(t,n),a=o(s,n);return i.getTime()===a.getTime()}function i(o,n){e(2,arguments);var i=t(o),a=s(n);return isNaN(a)?new Date(NaN):a?(i.setDate(i.getDate()+a),i):i}function a(s){e(1,arguments);var o=t(s);return o.setHours(0,0,0,0),o}function r(t,s){e(2,arguments);var o=a(t),n=a(s);return o.getTime()===n.getTime()}class c{constructor(e){this.title=e,this.tasks=[]}setProjectName(e){this.title=e}getProjectName(){return this.title}setTasks(e){this.tasks=e}getTasks(){return this.tasks}getTask(e){return this.tasks.find((t=>t.getTaskName()===e))}deleteTask(e){const t=this.tasks.find((t=>t.getTaskName()===e));this.tasks.splice(this.tasks.indexOf(t),1)}addTask(e){this.tasks.indexOf(e)>0||this.tasks.push(e)}getWeeksTasks(){return this.tasks.filter((o=>function(t,s){return e(1,arguments),n(t,Date.now(),s)}(function(t,o){e(2,arguments);var n=s(o);return i(t,-n)}(t(new Date(o.getDateFormatted())),1),1)))}getTodaysTasks(){return this.tasks.filter((s=>function(t){return e(1,arguments),r(t,Date.now())}(t(new Date(s.getDateFormatted())))))}}class d{constructor(e,t,s,o){this.complete=!1,this.title=e,this.description=t,this.dueDate=s,this.priority=o}getTaskName(){return this.title}updateTask(e,t,s,o,n){this.complete=o,this.title=e,this.description=t,this.dueDate=s,this.priority=n}setTaskComplete(){!1===this.complete?this.complete=!0:this.complete=!1}getDate(){return this.dueDate}getDateFormatted(){const e=this.dueDate.split("/")[2];return`${this.dueDate.split("/")[1]}/${e}/${this.dueDate.split("/")[0]}`}}class l{constructor(){this.projects=[],this.projects.push(new c("Today")),this.projects.push(new c("This Week"))}setProjects(e){this.projects=e}getProjects(){return this.projects}getProject(e){return this.projects.find((t=>t.getProjectName()===e))}addToProjectList(e){this.projects.indexOf(e)>0||this.projects.push(e)}deleteProject(e){const t=this.projects.find((t=>t.getProjectName()===e));this.projects.splice(this.projects.indexOf(t),1)}updateWeekTasks(){this.getProject("This Week").tasks=[],this.projects.forEach((e=>{"Today"!==e.getProjectName()&&"This Week"!==e.getProjectName()&&e.getWeeksTasks().forEach((e=>{this.getProject("This Week").addTask(new d(e.title,e.description,e.dueDate,e.priority))}))}))}updateTodayTasks(){this.getProject("Today").tasks=[],this.projects.forEach((e=>{"Today"!==e.getProjectName()&&"This Week"!==e.getProjectName()&&e.getTodaysTasks().forEach((e=>{this.getProject("Today").addTask(new d(e.title,e.description,e.dueDate,e.priority))}))}))}}class u{static saveList(e){localStorage.setItem("loadedProjects",JSON.stringify(e))}static getToDo(){const e=Object.assign(new l,JSON.parse(localStorage.getItem("loadedProjects")));return e.setProjects(e.getProjects().map((e=>Object.assign(new c,e)))),e.getProjects().forEach((e=>e.setTasks(e.getTasks().map((e=>Object.assign(new d,e)))))),e}static addProject(e){const t=u.getToDo();t.addToProjectList(e),u.saveList(t)}static deleteProject(e){const t=u.getToDo();t.deleteProject(e),u.saveList(t)}static addTask(e,t){const s=u.getToDo();s.getProject(e).addTask(t),u.saveList(s)}static deleteTask(e,t){const s=u.getToDo();s.getProject(e).deleteTask(t.title),u.saveList(s)}static updateTask(e,t,s){const o=u.getToDo();o.getProject(e).getTask(t).updateTask(s.title,s.description,s.dueDate,s.complete,s.priority),u.saveList(o)}static completeTask(e,t){const s=u.getToDo();s.getProject(e).getTask(t).setTaskComplete(),u.saveList(s)}static updateToday(){const e=u.getToDo();e.updateTodayTasks(),u.saveList(e)}static updateWeek(){const e=u.getToDo();e.updateWeekTasks(),u.saveList(e)}}let m;document.querySelector("#taskTable"),document.querySelector("#currentProject");const p=document.getElementById("taskList"),g=document.querySelectorAll(".project"),T=document.querySelector(".today"),h=document.querySelector(".this-week"),k=document.querySelector(".newProject"),y=document.querySelectorAll(".projectSelect"),j=(document.querySelector("#addTaskBtn"),document.getElementById("taskForm")),E=document.getElementById("btnCloseEdit"),v=document.querySelector("#updateTask"),f=e=>{document.getElementById("currentProject").innerHTML=e,m=e};let D=()=>{const e=document.getElementById("projectList");e.innerHTML="",u.getToDo().projects.forEach((t=>{if("Today"!==t.title&&"This Week"!==t.title){const s=document.createElement("li"),o=document.createElement("span"),n=document.createElement("div"),i=document.createElement("i");i.innerHTML='<i class="bi bi-trash"></i>',o.classList.add("badge","bg-primary","rounded-pill"),o.innerHTML=t.tasks.length,s.classList.add("project","list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center"),s.href="#",s.innerHTML=t.title,s.value=t.title,n.appendChild(i),n.appendChild(o),s.appendChild(n),e.appendChild(s),i.addEventListener("click",(()=>{L(),u.deleteProject(t.title),D()})),s.addEventListener("click",(()=>{f(t.title),P(t)}))}}))},P=e=>{L(),e.tasks.forEach((t=>{const s=document.createElement("tr"),o=document.createElement("td"),n=document.createElement("td");o.setAttribute("scope","row"),n.innerHTML='<i class="bi bi-trash"></i>',o.innerHTML='<i class="bi bi-pencil-square"></i>',s.appendChild(o);for(const e in t)if(t.hasOwnProperty(e))if("complete"===e){const o=document.createElement("div"),n=document.createElement("input");n.classList.add("form-check-input"),n.setAttribute("type","checkbox"),n.value=t[e],n.addEventListener("change",(()=>{u.completeTask(m,t.title)})),o.appendChild(n),s.appendChild(o)}else{const o=document.createElement("td");o.innerText=t[e],s.appendChild(o)}o.addEventListener("click",(()=>{w(t)})),n.addEventListener("click",(()=>{u.deleteTask(e.title,t),D(),P(u.getToDo().getProject(m))})),s.appendChild(n),p.appendChild(s)}))},L=()=>{p.innerHTML=""};const b=()=>{document.getElementById("modalBlank").style.display="none"};let w=e=>{const t=document.getElementById("modalBlank");"none"===t.style.display?(t.style.display="block",N(e)):t.style.display="none"},N=e=>{const t=document.getElementById("editName"),s=document.getElementById("editDescription"),o=document.getElementById("editDueDate"),n=document.getElementById("editPriority");document.getElementById("taskId").innerText=e.title,t.setAttribute("value",e.title),s.setAttribute("value",e.description),o.setAttribute("value",e.dueDate),n.setAttribute("value",e.priority)};v.onsubmit=function(e){e.preventDefault();const t=document.getElementById("taskId").innerText,s=document.getElementById("editName").value,o=document.getElementById("editDescription").value,n=document.getElementById("editDueDate").value,i=document.getElementById("editPriority").value,a=new d(s,o,n,i,!1);u.updateTask(m,t,a),P(u.getToDo().getProject(m)),v.reset(),b()},j.onsubmit=function(){const e=document.getElementById("name").value,t=document.getElementById("description").value,s=document.querySelector("#projectSelect").selectedOptions[0].value,o=document.getElementById("duedate").value,n=document.getElementById("priority").value,i=new d(e,t,o,n),a=u.getToDo().getProject(s);u.addTask(a.title,i),j.reset(),D(),P(u.getToDo().getProject(a.title)),f(a.title)},g.forEach((e=>{e.addEventListener("click",(()=>{f(e.innerHTML);const t=u.getToDo().getProject(e.getAttribute("value"));P(t)}))})),y.forEach((e=>{e.addEventListener("click",(()=>{(void 0).innerHTML="";const e=document.createElement("OPTION");e.value="",e.innerHTML="Choose Project",e.disabled=!0,(void 0).appendChild(e),u.getToDo().projects.forEach((e=>{if("Today"!==e.title&&"This Week"!==e.title){const t=document.createElement("OPTION");t.innerHTML=e.title,t.value=e.title,(void 0).appendChild(t)}}))}))})),k.addEventListener("click",(()=>{const e=prompt("Please Name This Project");if(""!==e&&void 0===u.getToDo().getProject(e)){const t=new c(e);u.addProject(t),D()}else alert("Project Already Exists")})),E.addEventListener("click",b),document.addEventListener("load",(u.getToDo(),void D())),T.addEventListener("click",(()=>{u.updateToday();const e=u.getToDo().getProject("Today");P(e),f(e.title)})),h.addEventListener("click",(()=>{u.updateWeek();const e=u.getToDo().getProject("This Week");P(e),f(e.title)}))})();