(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var s=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===s?new Date(t.getTime()):"number"==typeof t||"[object Number]"===s?new Date(t):("string"!=typeof t&&"[object String]"!==s||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function s(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function a(a,i){e(1,arguments);var o=i||{},n=o.locale,r=n&&n.options&&n.options.weekStartsOn,c=null==r?0:s(r),d=null==o.weekStartsOn?c:s(o.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=t(a),u=l.getDay(),m=(u<d?7:0)+u-d;return l.setDate(l.getDate()-m),l.setHours(0,0,0,0),l}function i(t,s,i){e(2,arguments);var o=a(t,i),n=a(s,i);return o.getTime()===n.getTime()}function o(a,i){e(2,arguments);var o=t(a),n=s(i);return isNaN(n)?new Date(NaN):n?(o.setDate(o.getDate()+n),o):o}function n(s){e(1,arguments);var a=t(s);return a.setHours(0,0,0,0),a}function r(t,s){e(2,arguments);var a=n(t),i=n(s);return a.getTime()===i.getTime()}class c{constructor(e){this.title=e,this.tasks=[]}setProjectName(e){this.title=e}getProjectName(){return this.title}setTasks(e){this.tasks=e}getTasks(){return this.tasks}getTask(e){return this.tasks.find((t=>t.getTaskName()===e))}deleteTask(e){const t=this.tasks.find((t=>t.getTaskName()===e));this.tasks.splice(this.tasks.indexOf(t),1)}addTask(e){this.tasks.indexOf(e)>0||this.tasks.push(e)}getWeeksTasks(){return this.tasks.filter((a=>function(t,s){return e(1,arguments),i(t,Date.now(),s)}(function(t,a){e(2,arguments);var i=s(a);return o(t,-i)}(t(new Date(a.getDateFormatted())),1),1)))}getTodaysTasks(){return this.tasks.filter((s=>function(t){return e(1,arguments),r(t,Date.now())}(t(new Date(s.getDateFormatted())))))}}class d{constructor(e,t,s,a){this.complete=!1,this.title=e,this.description=t,this.dueDate=s,this.priority=a}getTaskName(){return this.title}updateTask(e,t,s,a,i){this.complete=a,this.title=e,this.description=t,this.dueDate=s,this.priority=i}setTaskComplete(){(this.complete=!1)?this.complete=!0:this.complete=!1}getDate(){return this.dueDate}getDateFormatted(){const e=this.dueDate.split("/")[2];return`${this.dueDate.split("/")[1]}/${e}/${this.dueDate.split("/")[0]}`}}class l{constructor(){this.projects=[],this.projects.push(new c("Today")),this.projects.push(new c("This Week"))}setProjects(e){this.projects=e}getProjects(){return this.projects}getProject(e){return this.projects.find((t=>t.getProjectName()===e))}addToProjectList(e){this.projects.indexOf(e)>0||this.projects.push(e)}deleteProject(e){const t=this.projects.find((t=>t.getProjectName()===e));this.projects.splice(this.projects.indexOf(t),1)}updateWeekTasks(){this.getProject("This Week").tasks=[],this.projects.forEach((e=>{"Today"!==e.getProjectName()&&"This Week"!==e.getProjectName()&&e.getWeeksTasks().forEach((e=>{this.getProject("This Week").addTask(new d(e.title,e.description,e.dueDate,e.priority))}))}))}updateTodayTasks(){this.getProject("Today").tasks=[],this.projects.forEach((e=>{"Today"!==e.getProjectName()&&"This Week"!==e.getProjectName()&&e.getTodaysTasks().forEach((e=>{this.getProject("Today").addTask(new d(e.title,e.description,e.dueDate,e.priority))}))}))}}class u{static saveList(e){localStorage.setItem("loadedProjects",JSON.stringify(e))}static getToDo(){const e=Object.assign(new l,JSON.parse(localStorage.getItem("loadedProjects")));return e.setProjects(e.getProjects().map((e=>Object.assign(new c,e)))),e.getProjects().forEach((e=>e.setTasks(e.getTasks().map((e=>Object.assign(new d,e)))))),e}static addProject(e){const t=u.getToDo();t.addToProjectList(e),u.saveList(t)}static deleteProject(e){const t=u.getToDo();t.deleteProject(e),u.saveList(t)}static addTask(e,t){const s=u.getToDo();s.getProject(e).addTask(t),u.saveList(s)}static deleteTask(e,t){const s=u.getToDo();s.getProject(e).deleteTask(t.title),u.saveList(s)}static updateTask(e,t,s){const a=u.getToDo();a.getProject(e).getTask(t).updateTask(s.title,s.description,s.dueDate,s.complete,s.priority),u.saveList(a)}static completeTask(e,t){const s=u.getToDo();s.getProject(e).getTask(t).setTaskComplete(),u.saveList(s)}static updateToday(){const e=u.getToDo();e.updateTodayTasks(),u.saveList(e)}static updateWeek(){const e=u.getToDo();e.updateWeekTasks(),u.saveList(e)}}var m;document.querySelector("#taskTable"),document.querySelector("#currentProject");let p=document.getElementById("taskList");const g=document.querySelectorAll(".project"),T=document.querySelector(".today"),h=document.querySelector(".this-week"),k=document.querySelector(".newProject"),y=document.querySelectorAll(".projectSelect");document.querySelector("#addTaskBtn");var j=document.getElementById("taskForm");const v=document.getElementById("btnCloseEdit"),E=document.querySelector("#updateTask");var f=e=>{document.getElementById("currentProject").innerHTML=e,m=e},D=()=>{var e=document.getElementById("projectList");e.innerHTML="",u.getToDo().projects.forEach((t=>{if("Today"!==t.title&&"This Week"!==t.title){var s=document.createElement("li"),a=document.createElement("span"),i=document.createElement("div"),o=document.createElement("i");o.innerHTML='<i class="bi bi-trash"></i>',a.classList.add("badge","bg-primary","rounded-pill"),a.innerHTML=t.tasks.length,s.classList.add("project","list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center"),s.href="#",s.innerHTML=t.title,s.value=t.title,i.appendChild(o),i.appendChild(a),s.appendChild(i),e.appendChild(s),o.addEventListener("click",(()=>{L(),u.deleteProject(t.title),D()})),s.addEventListener("click",(()=>{f(t.title),P(t)}))}}))},P=e=>{L(),e.tasks.forEach((t=>{let s=document.createElement("tr"),a=document.createElement("td"),i=document.createElement("td");for(var o in a.setAttribute("scope","row"),i.innerHTML='<i class="bi bi-trash"></i>',a.innerHTML='<i class="bi bi-pencil-square"></i>',s.appendChild(a),t)if(t.hasOwnProperty(o))if("complete"==o){let e=document.createElement("div"),a=document.createElement("input");a.classList.add("form-check-input"),a.setAttribute("type","checkbox"),a.value=t[o],a.addEventListener("change",(()=>{u.completeTask(m,t.title)})),e.appendChild(a),s.appendChild(e)}else{let e=document.createElement("td");e.innerText=t[o],s.appendChild(e)}a.addEventListener("click",(()=>{w(t)})),i.addEventListener("click",(()=>{u.deleteTask(e.title,t),D(),P(u.getToDo().getProject(m))})),s.appendChild(i),p.appendChild(s)}))},L=()=>{p.innerHTML=""},b=()=>{document.getElementById("modalBlank").style.display="none"},w=e=>{let t=document.getElementById("modalBlank");"none"===t.style.display?(t.style.display="block",N(e)):t.style.display="none"},N=e=>{let t=document.getElementById("editName"),s=document.getElementById("editDescription"),a=document.getElementById("editDueDate"),i=document.getElementById("editPriority");document.getElementById("taskId").innerText=e.title,t.setAttribute("value",e.title),s.setAttribute("value",e.description),a.setAttribute("value",e.dueDate),i.setAttribute("value",e.priority)};E.onsubmit=function(e){e.preventDefault();let t=document.getElementById("taskId").innerText,s=document.getElementById("editName").value,a=document.getElementById("editDescription").value,i=document.getElementById("editDueDate").value,o=document.getElementById("editPriority").value,n=new d(s,a,i,o,!1);u.updateTask(m,t,n),P(u.getToDo().getProject(m)),E.reset(),b()},j.onsubmit=function(){let e=document.getElementById("name").value,t=document.getElementById("description").value,s=document.querySelector("#projectSelect").selectedOptions[0].value,a=document.getElementById("duedate").value,i=document.getElementById("priority").value,o=new d(e,t,a,i),n=u.getToDo().getProject(s);u.addTask(n.title,o),j.reset(),D(),P(u.getToDo().getProject(n.title)),f(n.title)},g.forEach((e=>{e.addEventListener("click",(()=>{f(e.innerHTML);let t=u.getToDo().getProject(e.getAttribute("value"));P(t)}))})),y.forEach((e=>{e.addEventListener("click",(function(){this.innerHTML="";let e=document.createElement("OPTION");e.value="",e.innerHTML="Choose Project",e.disabled=!0,this.appendChild(e),u.getToDo().projects.forEach((e=>{if("Today"!==e.title&&"This Week"!==e.title){let t=document.createElement("OPTION");t.innerHTML=e.title,t.value=e.title,this.appendChild(t)}}))}))})),k.addEventListener("click",(()=>{let e=prompt("Please Name This Project");if(""!==e&&null==u.getToDo().getProject(e)){let t=new c(e);u.addProject(t),D()}else alert("Project Already Exists")})),v.addEventListener("click",b),document.addEventListener("load",(u.getToDo(),void D())),T.addEventListener("click",(()=>{u.updateToday();let e=u.getToDo().getProject("Today");P(e),f(e.title)})),h.addEventListener("click",(()=>{u.updateWeek();let e=u.getToDo().getProject("This Week");P(e),f(e.title)}))})();